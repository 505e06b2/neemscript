<html>
<head>
<meta charset="utf8">
<script src="neemscript.js"></script>
<script>
var outbox;
var inbox;
var interpret;
window.onload = function() {
	outbox = document.getElementById('output');
	inbox = document.getElementById('input');
	inbox.focus();
	inbox.onkeydown = function(e) {
		if(e.keyCode == 9) { //Tab
			e.preventDefault();
			this.value += "\t";
		}
	}
	
	Module.print = function(text) {
		outbox.innerHTML += text + "\n";
		outbox.scrollTop = outbox.scrollHeight;
	};	
	Module.printErr = Module.print;
	
	Module.onRuntimeInitialized = function() {
		interpret = Module.cwrap('webmain', null, ['string']);
		console.log("Loaded Neemscript");
	}
};

</script>
<style>
body, textarea {
	background: #1a1a1a;
	color: #eee;
	padding:0;
	margin:0;
	font-family: monospace;
}

table {
	width:100%;
	height:100%;
}

th {
	height: 30px;
	font-size: 18px;
}

textarea {
	resize: none;
	width: 100%;
	height: 100%;
}

button {width:100%;}
</style>
</head>
<body>
<table>
	<tr><th>Input</th><th>Output</th></tr>
	<tr><td><textarea id="input"></textarea></td><td rowspan="2"><textarea id="output" readonly style="right:0;"></textarea></td></tr>
	<tr><td style="height:15px;"><button onclick="if(interpret === undefined) {alert('Can\'t load Neemscript... Try refreshing'); return;} interpret(input.value); inbox.focus()">Run</button></td></tr>
</table>
</body>
</html>